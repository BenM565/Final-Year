{% extends "base.html" %}

{% block content %}

<h2>Dashboard</h2>

{% if user.role == "company" %}

  {% for task in tasks %}
    <div class="card mb-3">
      <div class="card-body">

        <h5>{{ task.title }}</h5>

        <p>{{ task.requirements or "No description provided." }}</p>

        <p>
          Estimated hours:
          {{ task.estimated_hours or "Not specified" }}
        </p>

        <p>
          <strong>Applications:</strong>
          {{ task.application_count or 0 }}
        </p>

        {% if task.application_count and task.application_count > 0 %}
          <a href="{{ url_for('company_view_applicants', task_id=task.id) }}"
             class="btn btn-outline-primary btn-sm">
            View Applicants
          </a>
        {% endif %}

        <a href="{{ url_for('edit_task', task_id=task.id) }}"
           class="btn btn-outline-secondary btn-sm">
          Edit
        </a>

        <form method="POST"
              action="{{ url_for('delete_task', task_id=task.id) }}"
              class="d-inline">
          <button class="btn btn-outline-danger btn-sm">
            Delete
          </button>
        </form>

      </div>
    </div>
  {% endfor %}

{% elif user.role == "student" %}

  {% for task in tasks %}
    <div class="card mb-3">
      <div class="card-body">
        <h5>{{ task.title }}</h5>
        <p>{{ task.requirements }}</p>
        <p>Estimated hours: {{ task.estimated_hours }}</p>
      </div>
    </div>
  {% endfor %}

{% endif %}

{% endblock %}
